# 컴퓨터 아키텍처와 운영체제

## 프로시저, 서브루틴, 함수

함수, 프로시저, 서브루틴은 코드를 재사용하는 주요 수단이다. <br>

<img width="519" alt="스크린샷 2024-09-01 오후 3 55 04" src="https://github.com/user-attachments/assets/33edde6d-4359-4d1d-a79b-016cdfadc0cc">

## 스택

함수를 호출할 때는 반환 주소를 접시에 넣어서 접시 더미 맨 위에 넣는다. <br>
함수 호출에서 돌아올 때는 접시 더미 맨 위의 접시를 보고 반환 주소를 결정한 다음, 접시를 제거한다. <br>
이런 구조를 **스택**이라고 하고, 스택에는 물건을 푸시해서 넣고, 팝해서 제거한다. <br>
스택에 더 이상 들어갈 공간이 없으면 스택 오버플로라고 말하고, 빈 스택에서 물건을 가져오려고 하면 스택 언더플로라고 부른다.

## 인터럽트

인터럽트는 실행중인 프로그램을 잠깐 중단시켜서 주의를 기울여야 하는 외부의 요소에 대응할 수 있는 방법이다. <br>
인터럽트 시스템은 적절한 신호가 들어오면 CPU 실행을 잠깐 중단시킬 수 있는 핀이나 전기 연결을 포함한다. <br>
고려해야 하는것은 인터럽트에 대한 응답시간과, 인터럽트를 서비스하고 나중에 다시 원래대로 돌아오기 위한 상태를 저장할 방법이다. <br>
인터럽트 시스템은 서비스 후 돌아올 프로그램 위치를 스택에 저장한다.

## 메모리 관리 장치

메모리 관리 장치(MMU)는 가상 주소와 물리 주소를 구분한다. <br>
프로그램은 가상 주소를 사용해 작성되고, MMU는 가상 주소를 물리 주소로 변환해준다.

<img width="694" alt="스크린샷 2024-09-01 오후 4 03 14" src="https://github.com/user-attachments/assets/59a50bea-8cb9-4564-b1e6-e19c6c2f03a4">

MMU는 가상 메모리 주소를 두 부분으로 나눈다. <br>
주소의 하위 부분은 물리적 주소 범위와 같고, 상위 부분은 페이지 테이블이라는 RAM 영역을 통해 주소를 변환한다.

## 메모리 계층과 성능

컴퓨터는 1초에 수십억 개의 명령어를 실행할 수 있다. <br>
하지만 실행할 명령어가 도착하기를 CPU가 기다려야 하거나, 메모리에 데이터를 읽거나 쓸 때까지 CPU가 기다려야 한다면 그렇게 많은 일을 해낼 수는 없다. 

CPU가 주 메모리보다 10배 더 빠르게 작동한다고 하자. <br>
이를 해석하면 CPU가 메모리를 기다리느라 많은 시간을 소비해야 한다는 뜻이다. <br>
이를 해결하기 위해 집에 있는 식품저장고에 해당하는 cache라는 하드웨어를 CPU에 추가한다. <br>
이는 가게보다 훨씬 작지만 훨씬 빠르고 프로세서와 같은 속도로 작동한다.

<img width="396" alt="스크린샷 2024-09-01 오후 4 10 13" src="https://github.com/user-attachments/assets/8b68b4cb-5137-4954-b50a-3d37197d0c1a">

## 코프로세서

주 메모리와 디스크 사이에 단순한 데이터 복사가 자주 일어날 수 있다. <br>
일부 코프로세서는 다른 일은 처리하지 않고 데이터 복사만 담당한다. 이런 방식을 직접 메모리 접근(DMA)라고 한다.












